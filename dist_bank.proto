// proto for distributed bank
// dist_bank.proto

// using version 3
syntax = "proto3";

package dist_bank

// definition of the service
service DistBank {
    rpc LookUpAccount (LookUpRequest) returns (LookUpRely) {}
    rpc Withdraw (WithdrawRequest) returns (WithdrawReply) {}
    rpc Save(SaveRequest) returns (SaveReply) {}
}

// Look up account balance request.
// The account id of the client, must be provided.
message LookUpRequest {
    required string account_id = 1;
}

// Look up account balance reply.
// String info saying whether the request is successful and
// float number telling the account balance.
// If account does not exist, only fail info will be replied.
message LookUpRely {
    required string res_info = 1;
    optional float account_balance = 2;
}

message WithdrawRequest {
    required string account_id = 1;
    required float with_amount = 2;
}

message WithdrawReply {
    required string res_info = 1;
    optional float updated_balance = 2;
}

message SaveRequest {
    required string account_id = 1;
    required float save_amount = 2;
}

message SaveReply {
    required string res_info = 1;
    optional float  updated_balance = 2;
}